@using Arsenal.Models.ArsenalDataModels

@model IEnumerable<Transaction>

@{
    ViewData["Title"] = "Index";
}

<!-- Scripts that will load at the section defined in _layout.cshtml -->
@section Scripts{
    <script type="text/javascript">
        $('#temp').change(
            function getNewList() {
                var valueSelected = $(this).val();
                
                $.get('/Transactions/SpreadSheet/' + valueSelected, function (data) {
                    $('#spreadSheetPlaceHolder').html(data);
                    $('#spreadSheetPlaceHolder').fadeIn('fast');
                });
            });
    </script>
}
<h2>Index</h2>

<p>
    <!-- creates a dropdownlist generated from all the different credit cards in the model given -->
    @Html.DropDownList(
        "temp",                                                                     //temporary name for dropdownlist as an object, TODO figure out how to get this linked up as a strongly typed namespace for an IEnumerable
        new SelectList(Model.Select(x => x.CreditCardLastFourDigits).Distinct()),   //Pulls distinct credit card numbers
        "Select Credit Card"                                                      //Placeholder text
        )
</p>

<div id="spreadSheetPlaceHolder" style="display:none;"></div>